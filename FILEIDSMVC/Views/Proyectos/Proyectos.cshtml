@model FILEIDSMVC.Models.ProyectosModel
@{
    ViewBag.Title = "Proyectos";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

@if (User.Identity.IsAuthenticated)
{


    <header class="navbar navbar-dark sticky-top bg-dark flex-md-nowrap p-0 shadow">
        <a class="navbar-brand col-md-4 col-lg-4 me-0 px-3" href="#">Proyectos</a>
        <hr>
        <button class="navbar-toggler position-absolute d-md-none collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#sidebarMenu" aria-controls="sidebarMenu" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <input class="form-control form-control-dark w-100" type="text" placeholder="Búsqueda" aria-label="Search">
        <ul class="navbar-nav px-3">
            <li class="nav-item text-nowrap">
                <a class="nav-link" href="#">Cerrar sesión</a>
            </li>
        </ul>
    </header>


    <div class="container-fluid">
        <div class="row">
            <nav id="sidebarMenu" class="bg-light col-lg-4 col-md-4 collapse d-md-block sidebar">
                <div class="card">
                    <div class="btn-group" role="group" aria-label="Basic example">
                        <a type="button" href='@Url.Action("CrearProyecto", "Proyectos")' class="btn btn-success" hre>Crear nuevo proyecto</a>
                        <button type="button" class="btn btn-primary">Sin Uso</button>
                    </div>
                    <hr>
                    @if (Model != null)
                    {

                        foreach (var item in Model.ListaDirectorios)
                        {
                            if (item.DirectorioActivo)
                            {

                                <div class="card-body">

                                    <h5 class="card-title">@Html.DisplayFor(modelItem => item.NombreDirectorio)</h5>
                                    <h6 class="card-subtitle mb-2 text-muted">Proyecto activo</h6>
                                    <p class="card-text">@Html.DisplayFor(modelItem => item.DescriptorDirectorio)</p>
                                    <hr>
                                    @*Estas tres funciones requieren llamadas AJAX que hay que practicar*@

                                    <div class="row">
                                        <div class="col">
                                            <button type="button" class="btn btn-outline-info">Ver archivos</button>
                                        </div>
                                        <div class="col">
                                            <button type="button" class="btn btn-outline-success">Agregar archivo</button>
                                        </div>
                                        <div class="col">
                                            <button type="button" class="btn btn-outline-danger">Eliminar proyecto</button>
                                        </div>
                                    </div>
                                    <hr>
                                </div>
                            }
                        }
                    }
                </div>
            </nav>
            <main class="col-lg-8 col-md-8 ms-sm-auto px-md-4">
                <div class="chartjs-size-monitor">
                    <div class="chartjs-size-monitor-expand">
                        <div class=""></div>
                    </div>
                    <div class="chartjs-size-monitor-shrink">
                        <div class=""></div>
                    </div>
                </div>
                <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
                    <h4>Nombre del archivo seleccionado</h4>
                </div>
                <canvas class="my-4 w-100 chartjs-render-monitor" id="myChart" width="2304" height="972" style="display: block; height: 486px; width: 1152px;"></canvas>
                <h2>Archivos en proyecto seleccionado</h2>
                <div class="table-responsive">
                    <table class="table table-striped table-sm">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Nombre</th>
                                <th>Autor</th>
                                <th>Versión</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>1</td>
                                <td>archivo.sldprt</td>
                                <td>John Doe</td>
                                <td>1/1</td>
                            </tr>
                            <tr>
                                <td>2</td>
                                <td>ensamblaje.sldasm</td>
                                <td>John Doe</td>
                                <td>2/2</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </main>
        </div>
    </div>

    <div>
        @Html.ActionLink("Volver", "Index", "Home")
    </div>

    @section scripts{
        <script src="~/Scripts/Controllers/Proyectos.js"></script>
    }
}
else
{
    Context.Response.Redirect("/Account/Login");
}

